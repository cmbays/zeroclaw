# ZeroClaw — Mattermost Hub Configuration Template (single-process, 6 bots)
#
# All 6 bots run in a single ZeroClaw process.
# Each [[channels_config.mattermost_bots]] entry spawns one MattermostChannel
# instance with its own bot token. They share the Ollama provider and SQLite memory.
#
# Usage:
#   cp config/config.mattermost.example.toml config/config.mattermost.toml
#   # fill in bot tokens from .envrc.mattermost
#   source .envrc.mattermost
#   zeroclaw start --config config/config.mattermost.toml
#
# Bot tokens are in .envrc.mattermost (gitignored). Load with:
#   source .envrc.mattermost
#
# Architecture:
#   One ZeroClaw process — six MattermostChannel instances (one per bot token).
#   Each bot entry has `mode = "<name>"` linking it to a [modes.<name>] section.
#   The channel IS the mode: Mattermost routes @mentions to the right bot account,
#   so each bot gets its own ChannelRuntimeContext with distinct system prompt,
#   tool allowlist, and temperature. Provider and Memory are shared across all bots.
#   See docs/planning/spike-mattermost-hub.md for full design.
# ─────────────────────────────────────────────────────────────────

# ── Shared Provider (Ollama) ──────────────────────────────────────
default_provider = "ollama"
default_model = "qwen3:14b"
api_key = "http://localhost:11434"
default_temperature = 0.5

# ── Shared Memory ─────────────────────────────────────────────────
[memory]
backend = "sqlite"
# All bots share one SQLite file for cross-bot context
sqlite_path = "~/.zeroclaw/mattermost-hub.db"

# ── Disable CLI (headless multi-bot mode) ─────────────────────────
[channels_config]
cli = false

# ═══════════════════════════════════════════════════════════════════
# BOT: zeroclaw_pm — PM (Linear, standups, backlog)
# Temperature: 0.1  |  mention_only: true
# ═══════════════════════════════════════════════════════════════════
[[channels_config.mattermost_bots]]
url = "http://localhost:8065"
# Token from: echo $MM_TOKEN_PM
bot_token = "REPLACE_WITH_MM_TOKEN_PM"
allowed_users = ["*"]
thread_replies = true
mention_only = true
mode = "zeroclaw_pm"

# ═══════════════════════════════════════════════════════════════════
# BOT: zeroclaw_devops — DevOps (shell, deployments, infra)
# Temperature: 0.3  |  mention_only: true
# ═══════════════════════════════════════════════════════════════════
[[channels_config.mattermost_bots]]
url = "http://localhost:8065"
# Token from: echo $MM_TOKEN_DEVOPS
bot_token = "REPLACE_WITH_MM_TOKEN_DEVOPS"
allowed_users = ["*"]
thread_replies = true
mention_only = true
mode = "zeroclaw_devops"

# ═══════════════════════════════════════════════════════════════════
# BOT: zeroclaw_security — Security (code review, scanning, audit)
# Temperature: 0.1  |  mention_only: true
# ═══════════════════════════════════════════════════════════════════
[[channels_config.mattermost_bots]]
url = "http://localhost:8065"
# Token from: echo $MM_TOKEN_SECURITY
bot_token = "REPLACE_WITH_MM_TOKEN_SECURITY"
allowed_users = ["*"]
thread_replies = true
mention_only = true
mode = "zeroclaw_security"

# ═══════════════════════════════════════════════════════════════════
# BOT: zeroclaw_creative — Creative (ideation, architecture)
# Temperature: 0.8  |  mention_only: true
# ═══════════════════════════════════════════════════════════════════
[[channels_config.mattermost_bots]]
url = "http://localhost:8065"
# Token from: echo $MM_TOKEN_CREATIVE
bot_token = "REPLACE_WITH_MM_TOKEN_CREATIVE"
allowed_users = ["*"]
thread_replies = true
mention_only = true
mode = "zeroclaw_creative"

# ═══════════════════════════════════════════════════════════════════
# BOT: zeroclaw_dev — Dev (code, debugging, PR review)
# Temperature: 0.3  |  mention_only: true
# ═══════════════════════════════════════════════════════════════════
[[channels_config.mattermost_bots]]
url = "http://localhost:8065"
# Token from: echo $MM_TOKEN_DEV
bot_token = "REPLACE_WITH_MM_TOKEN_DEV"
allowed_users = ["*"]
thread_replies = true
mention_only = true
mode = "zeroclaw_dev"

# ═══════════════════════════════════════════════════════════════════
# BOT: zeroclaw_coordinator — Coordinator (delegate, big picture)
# Temperature: 0.5  |  mention_only: true
# ═══════════════════════════════════════════════════════════════════
[[channels_config.mattermost_bots]]
url = "http://localhost:8065"
# Token from: echo $MM_TOKEN_COORDINATOR
bot_token = "REPLACE_WITH_MM_TOKEN_COORDINATOR"
allowed_users = ["*"]
thread_replies = true
mention_only = true
mode = "zeroclaw_coordinator"

# ═══════════════════════════════════════════════════════════════════
# Per-mode brain definitions
#
# Each [modes.<name>] entry is linked to the bot above via `mode = "<name>"`.
# The bot gets its own ChannelRuntimeContext using:
#   - system_prompt: built from aieos_path identity file (optional)
#   - tool_allowlist: only these tools are offered to the model
#   - temperature: overrides default_temperature for this bot
#
# Identity files live in modes/<name>/identity.json (AIEOS format).
# See docs/planning/spike-mattermost-hub.md for the AIEOS schema.
# ═══════════════════════════════════════════════════════════════════

[modes.zeroclaw_pm]
# PM bot — Linear project management, standups, backlog grooming
identity_format = "aieos"
aieos_path = "modes/zeroclaw_pm/identity.json"
tool_allowlist = ["linear", "memory_store", "memory_recall", "memory_forget", "ask_user"]
temperature = 0.1

[modes.zeroclaw_devops]
# DevOps bot — shell execution, file ops, HTTP requests, infra
identity_format = "aieos"
aieos_path = "modes/zeroclaw_devops/identity.json"
tool_allowlist = ["shell", "file_read", "file_write", "file_edit", "glob", "http_request", "ask_user"]
temperature = 0.3

[modes.zeroclaw_security]
# Security bot — code review, vulnerability scanning, audit
identity_format = "aieos"
aieos_path = "modes/zeroclaw_security/identity.json"
tool_allowlist = ["content_search", "file_read", "glob", "ask_user"]
temperature = 0.1

[modes.zeroclaw_creative]
# Creative bot — ideation, architecture, mentorship
identity_format = "aieos"
aieos_path = "modes/zeroclaw_creative/identity.json"
tool_allowlist = ["memory_store", "memory_recall", "ask_user"]
temperature = 0.8

[modes.zeroclaw_dev]
# Dev bot — coding, debugging, PR review
identity_format = "aieos"
aieos_path = "modes/zeroclaw_dev/identity.json"
tool_allowlist = ["shell", "file_read", "file_write", "file_edit", "glob", "content_search", "ask_user"]
temperature = 0.3

[modes.zeroclaw_coordinator]
# Coordinator bot — delegation, big picture, cross-bot orchestration
identity_format = "aieos"
aieos_path = "modes/zeroclaw_coordinator/identity.json"
tool_allowlist = ["delegate", "memory_store", "memory_recall", "ask_user"]
temperature = 0.5
