# ZeroClaw — Mattermost Hub Configuration Template
#
# This file shows the configuration structure for all 6 ATLA bots.
# Each bot runs as a separate ZeroClaw process (or channel instance)
# with its own [channels_config.mattermost] section.
#
# Usage:
#   Copy this file to config/config.<botname>.toml for each bot.
#   Replace placeholder values with real tokens from .envrc.mattermost.
#   Run: zeroclaw start --config config/config.<botname>.toml
#
# Bot Tokens:
#   Tokens are generated by scripts/mattermost-setup.sh and stored in
#   .envrc.mattermost. Load them with: source .envrc.mattermost
#   Then reference as environment variables (preferred over hardcoding).
#
# Architecture Note:
#   Each bot is a separate Mattermost bot account with its own token.
#   One ZeroClaw process per bot → one [channels_config.mattermost] per config.
#   Shared: Ollama (LLM), SQLite memory backend.
#   See docs/planning/spike-mattermost-hub.md for full design.
#
# ─────────────────────────────────────────────────────────────────

# ── Shared Provider (Ollama) ──────────────────────────────────────
# Same for all bots — points to shared Ollama instance.
default_provider = "ollama"
default_model = "qwen3:14b"
# api_key is unused for Ollama but required by schema
api_key = "http://localhost:11434"
# Temperature is overridden per-mode below

# ── Shared Memory ─────────────────────────────────────────────────
[memory]
backend = "sqlite"
# All bots share one SQLite file for cross-bot context
sqlite_path = "~/.zeroclaw/mattermost-hub.db"

# ═══════════════════════════════════════════════════════════════════
# BOT: @sokka — PM (Linear, standups, backlog)
# Temperature: 0.1  |  Tools: linear, memory, ask_user
# ═══════════════════════════════════════════════════════════════════
#
# config/config.sokka.toml — copy and fill in token

[channels_config.mattermost]
url = "http://localhost:8065"
# Token from: echo $MM_TOKEN_SOKKA
bot_token = "${MM_TOKEN_SOKKA}"
# channel_id is optional — omit to listen on all accessible channels
# channel_id = "<zc-general channel ID>"
allowed_users = ["*"]
thread_replies = true
mention_only = true

[modes.pm]
identity_format = "aieos"
aieos_path = "modes/pm/identity.json"
skills_dir = "modes/pm/skills"
response_policy = "You are Sokka, the PM. Strategic, direct, sarcastic humor. Manage Linear issues and project status. Always ask clarifying questions before creating work items."
tools = ["linear", "memory_store", "memory_recall", "memory_forget", "ask_user"]

[modes.pm.visual_identity]
username = "sokka"
icon_emoji = ":boomerang:"

# ─────────────────────────────────────────────────────────────────
# default_temperature = 0.1
# (Set in top-level config for Sokka's config file)

# ═══════════════════════════════════════════════════════════════════
# BOT: @toph — DevOps (shell, deployments, infra)
# Temperature: 0.3  |  Tools: shell, file_read, http_request, ask_user
# ═══════════════════════════════════════════════════════════════════
#
# config/config.toph.toml — copy and fill in token
#
# [channels_config.mattermost]
# url = "http://localhost:8065"
# bot_token = "${MM_TOKEN_TOPH}"
# allowed_users = ["*"]
# thread_replies = true
# mention_only = true
#
# [modes.devops]
# identity_format = "aieos"
# aieos_path = "modes/devops/identity.json"
# response_policy = "You are Toph, the DevOps bot. Blunt and direct. Handle deployments, CI/CD, Docker, and infrastructure. No sugarcoating."
# tools = ["shell", "file_read", "http_request", "ask_user"]
#
# [modes.devops.visual_identity]
# username = "toph"
# icon_emoji = ":rock:"

# ═══════════════════════════════════════════════════════════════════
# BOT: @azula — Security (code review, scanning, audit)
# Temperature: 0.1  |  Tools: content_search, file_read, http_request, ask_user
# ═══════════════════════════════════════════════════════════════════
#
# config/config.azula.toml — copy and fill in token
#
# [channels_config.mattermost]
# url = "http://localhost:8065"
# bot_token = "${MM_TOKEN_AZULA}"
# allowed_users = ["*"]
# thread_replies = true
# mention_only = true
#
# [modes.security]
# identity_format = "aieos"
# aieos_path = "modes/security/identity.json"
# response_policy = "You are Azula, the Security bot. Precise and methodical. Zero tolerance for vulnerabilities. Scan code, review PRs, audit changes."
# tools = ["content_search", "file_read", "http_request", "ask_user"]
#
# [modes.security.visual_identity]
# username = "azula"
# icon_emoji = ":fire:"

# ═══════════════════════════════════════════════════════════════════
# BOT: @iroh — Creative (ideation, architecture)
# Temperature: 0.8  |  Tools: memory_store, memory_recall, ask_user
# ═══════════════════════════════════════════════════════════════════
#
# config/config.iroh.toml — copy and fill in token
#
# [channels_config.mattermost]
# url = "http://localhost:8065"
# bot_token = "${MM_TOKEN_IROH}"
# allowed_users = ["*"]
# thread_replies = true
# mention_only = true
#
# [modes.creative]
# identity_format = "aieos"
# aieos_path = "modes/creative/identity.json"
# response_policy = "You are Iroh, the Creative bot. Wise, philosophical, lateral thinking. Help with brainstorming, architecture ideation, and finding unexpected solutions."
# tools = ["memory_store", "memory_recall", "ask_user"]
#
# [modes.creative.visual_identity]
# username = "iroh"
# icon_emoji = ":tea:"

# ═══════════════════════════════════════════════════════════════════
# BOT: @katara — Dev (code, debugging, PR review)
# Temperature: 0.3  |  Tools: shell, file_read, file_write, file_edit, ask_user
# ═══════════════════════════════════════════════════════════════════
#
# config/config.katara.toml — copy and fill in token
#
# [channels_config.mattermost]
# url = "http://localhost:8065"
# bot_token = "${MM_TOKEN_KATARA}"
# allowed_users = ["*"]
# thread_replies = true
# mention_only = true
#
# [modes.dev]
# identity_format = "aieos"
# aieos_path = "modes/dev/identity.json"
# response_policy = "You are Katara, the Dev bot. Detail-oriented, high standards, fixes things properly. Code, debug, review PRs, and implement features."
# tools = ["shell", "file_read", "file_write", "file_edit", "glob", "content_search", "ask_user"]
#
# [modes.dev.visual_identity]
# username = "katara"
# icon_emoji = ":droplet:"

# ═══════════════════════════════════════════════════════════════════
# BOT: @aang — Coordinator (delegate, big picture)
# Temperature: 0.5  |  Tools: delegate, memory_recall, ask_user
# ═══════════════════════════════════════════════════════════════════
#
# config/config.aang.toml — copy and fill in token
#
# [channels_config.mattermost]
# url = "http://localhost:8065"
# bot_token = "${MM_TOKEN_AANG}"
# allowed_users = ["*"]
# thread_replies = true
# mention_only = true
#
# [modes.coordinator]
# identity_format = "aieos"
# aieos_path = "modes/coordinator/identity.json"
# response_policy = """
# You are Aang, the Coordinator bot. Bridge all team members, route work, see the big picture.
#
# ## Team Members
# - @sokka (PM): Linear, project status, backlog, standups
# - @toph (DevOps): Deployments, CI/CD, Docker, infrastructure
# - @azula (Security): Code review, vulnerability scanning, audit
# - @iroh (Creative): Brainstorming, architecture ideation
# - @katara (Dev): Code, debugging, PR review, fixes
# - @aang (Coordinator): Routes work, big picture, balance
#
# When delegating, @mention the appropriate team member in the thread.
# """
# tools = ["delegate", "memory_recall", "ask_user"]
#
# [modes.coordinator.visual_identity]
# username = "aang"
# icon_emoji = ":wind_face:"
