# ZeroClaw — Sokka (Dev Bot) config
# Usage: zeroclaw start --config config/sokka.toml
# Bot token: source .envrc.mattermost && echo $MM_TOKEN_SOKKA

default_provider = "ollama"
default_model = "qwen3:4b"
# Docker: api_key = "http://zeroclaw-ollama:11434"
api_key = "http://localhost:11434"
default_temperature = 0.3

[agent]
compact_context = false   # keep full context for code/file workflows
parallel_tools = true     # concurrent file reads and shell ops
skills_prompt_mode = "compact"
tool_allowlist = ["shell", "file_read", "file_write", "file_edit", "glob", "content_search", "ask_user", "apply_patch", "process", "docx_read"]

[autonomy]
# Required fields (serde has no defaults for these — must be explicit):
level = "supervised"
workspace_only = true
allowed_commands = ["git", "npm", "cargo", "ls", "cat", "grep", "find", "echo", "pwd", "wc", "head", "tail", "date", "docker", "curl", "python3", "bash", "sh"]
forbidden_paths = ["/etc", "/root", "/home", "/usr", "/bin", "/sbin", "/lib", "/opt", "/boot", "/dev", "/proc", "/sys", "/var", "/tmp", "~/.ssh", "~/.gnupg", "~/.aws", "~/.config"]
max_actions_per_hour = 20
max_cost_per_day_cents = 500
# Allow shell and file tools via Mattermost (non-CLI) without human confirmation per action.
# Shell is excluded in non-CLI channels by default — override here so Sokka can act on delegated tasks.
auto_approve = ["shell", "file_read", "file_write", "file_edit", "glob", "content_search", "memory_recall"]
non_cli_excluded_tools = []  # empty = expose all tool_allowlist tools via Mattermost

[identity]
format = "aieos"
aieos_path = "/zeroclaw-data/identities/sokka/identity.json"

[memory]
backend = "sqlite"
auto_save = true
sqlite_path = "~/.zeroclaw/sokka.db"

[channels_config]
cli = false

[channels_config.mattermost]
url = "http://localhost:8065"
bot_token = "REPLACE_WITH_MM_TOKEN_SOKKA"
# admin_token = "REPLACE_WITH_MM_ADMIN_TOKEN"  # needed for profile sync (display name, bio, avatar)
allowed_users = ["*"]
thread_replies = true
mention_only = true
# thread_ttl_minutes = 30  # minutes of inactivity before thread continuation expires (default 30)
# prompt_guard_action = "warn"  # "warn" (default) | "block"
#   warn  — log suspicious patterns at debug level, pass message through (default)
#   block — silently drop messages that score above the injection threshold

[team]
# All 6 bots listed in every config (including self) — intentional: simplifies identical team blocks.
# human_username = "your_mattermost_username"  # Optional: @mention this user when human input is needed

[[team.bots]]
username = "sokka"
role = "Dev"
description = "Code generation, debugging, file operations, shell commands"

[[team.bots]]
username = "katara"
role = "PM"
description = "Linear issues, project status, backlog grooming, standups"

[[team.bots]]
username = "toph"
role = "DevOps"
description = "Deployments, CI/CD, Docker, infrastructure, monitoring"

[[team.bots]]
username = "azula"
role = "Security"
description = "Code review, vulnerability scanning, security audit"

[[team.bots]]
username = "iroh"
role = "Creative"
description = "Brainstorming, architecture ideation, team memory, lateral thinking"

[[team.bots]]
username = "aang"
role = "Coordinator"
description = "Routes work, big picture, cross-team coordination"
